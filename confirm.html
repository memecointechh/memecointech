<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <!-- <meta name="viewport" content="width=device-width, initial-scale=1.0"> -->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <title>Confirm Deposit</title>
    <meta name="theme-color" content=" #3e059b">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-title" content="Your Website">
    <meta name="apple-mobile-web-app-status-bar-style" content=" #3e059b">
    <link rel="stylesheet" href="./css/invest.css">
<link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;1,100&display=swap" rel="stylesheet">

        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>


    
</head>

<body>
    
    <div class="circle">

    </div>
    <header>
      
      <a href="index.html"><div class="logo" > <section class="gear-container">
        <div class="large-gear">
          <div class="small-gear"></div>
          <div class="small-gear"></div>
          <div class="small-gear"></div>
        </div>
      </section>MemecoinTech</div></a>
        <nav>
          <ul>
            <a href="signup.html"><li>SIGN UP</li></a>
           
            <a href="index.html"><li>HOME</li></a>
            <a href=""><li>FAQ</li></a>
            <a href=""><li>TERMS</li></a>
            <a href=""><li>SUPPORT</li></a>
          </ul>
            
        </nav>
    </header>

    <div class="dashboard-container">
        <div class="body">
            <aside class="dashboard-sidebar">
                <nav>
                    <ul>
                      <li><a href="#"><img src="https://cdn-icons-png.freepik.com/256/16108/16108349.png?uid=R55814283&ga=GA1.1.1328920485.1725346503&semt=ais_hybrid" alt="">Account</a></li><hr style="">
      
                      <!-- <li><a href="invest.html"><img src="https://cdn-icons-png.freepik.com/256/12477/12477651.png?uid=R55814283&ga=GA1.1.1328920485.1725346503&semt=ais_hybrid" alt="">Make Deposit</a></li><hr> -->
      
                      <li><a href="#"><img src="https://cdn-icons-png.freepik.com/256/15017/15017061.png?uid=R55814283&ga=GA1.1.1328920485.1725346503&semt=ais_hybrid" alt="">Earning History</a></li><hr>
      
                      <li><a href="#"><img src="https://cdn-icons-png.freepik.com/256/12477/12477651.png?uid=R55814283&ga=GA1.1.1328920485.1725346503&semt=ais_hybrid" alt="">Withdraw</a></li><hr>
      
                      <li><a href="#"><img src="https://cdn-icons-png.freepik.com/256/13843/13843283.png?uid=R55814283&ga=GA1.1.1328920485.1725346503&semt=ais_hybrid" alt="">Withdrawal History</a></li><hr>
      
                      <li><a href="#"><img src="https://cdn-icons-png.freepik.com/256/13366/13366515.png?uid=R55814283&ga=GA1.1.1328920485.1725346503&semt=ais_hybrid" alt="">Your Referal </a></li><hr>
      
                      <li><a href="#"><img src="https://cdn-icons-png.freepik.com/256/16108/16108382.png?uid=R55814283&ga=GA1.1.1328920485.1725346503&semt=ais_hybrid" alt="">Referal Link</a></li><hr>
      
                      <li><a href="#"><img src="https://cdn-icons-png.freepik.com/256/3503/3503638.png?uid=R55814283&ga=GA1.1.1328920485.1725346503&semt=ais_hybrid" alt="">Edit Profile</a></li><hr>
      
                      <li><a href="#"><img src="https://cdn-icons-png.freepik.com/256/15016/15016708.png?uid=R55814283&ga=GA1.1.1328920485.1725346503&semt=ais_hybrid" alt="">Wallet</a></li><hr>
      
                      <li><a href="#"><img src="https://cdn-icons-png.freepik.com/256/11302/11302228.png?uid=R55814283&ga=GA1.1.1328920485.1725346503&semt=ais_hybrid" alt="">Logout</a></li>
                    </ul>
                  </nav>
            </aside>

            <main class="dashboard-main">
                <div class="head"><h2>DEPOSIT</h2></div>
                    <div class="bitcoinaddress">
                        <h2>PLEASE CONFIRM YOUR DEPOSIT</h2>
                        <p>Please send payment to the bitcoin address bellow</p>
                        <p>Make sure to only send exact amount in BTC</p>
                        <p>Kindly note that your deposit will automatically be confirmed after 2 blockchain verifications</p>
                        <div class="btc-address">dsciedhahdasd3e36e3ghdgjsdfhg39</div>
                        <button class="confirm-button">COPY WALLET ADDRESS</button>
                    </div>
                <div class="container">
                    <div class="header">
                      <h1>Confirm Deposit</h1>
                    </div>
                    <div class="details">
                      <h2>Plan Details</h2>
                      <ul>
                        <li>
                          <span class="label">Plan Name:</span> <span id="plan-name"></span>
                        </li>
                        <li>
                          <span class="label">Profit:</span> <span id="plan-profit"></span>
                        </li>
                        <li>
                          <span class="label">Principle Return:</span> <span id="plan-principle-return"></span>
                        </li>
                        <li>
                          <span class="label">Credit Amount:</span> <span id="plan-credit-amount"></span>
                        </li>
                        <li>
                          <span class="label">Deposit Fee:</span> <span id="plan-deposit-fee"></span>
                        </li>
                        <li>
                          <span class="label">Debit Amount:</span> <span id="plan-debit-amount"></span>
                        </li>
                        <li>
                            <span class="label">Deposit Method:</span> <span id="deposit-method"></span>
                          </li>
                      </ul>
                    </div>
                    <div class="actions">
                      <button id="confirm-button" class="confirm-button">Confirm Deposit</button>
                      <button id="cancel-button" class="cancel-button">Cancel</button>
                    </div>
                  </div>
            </main>
        </div>
    </div>
    
      <script>

      // Define the planDetails object
  const planDetails = [
    {
      name: '20% RIO AFTER 48 HOURS',
      profit: '20%',
      principleReturn: 'Yes',
      creditAmount: '',
      depositFee: '0.00%',
      debitAmount: '',
    },
    {
      name: '50% RIO AFTER 72 HOURS',
      profit: '50%',
      principleReturn: 'Yes',
      creditAmount: '',
      depositFee: '0.00%',
      debitAmount: '',
    },
    {
      name: '100% RIO AFTER 96 HOURS',
      profit: '100%',
      principleReturn: 'Yes',
      creditAmount: '',
      depositFee: '0.00%',
      debitAmount: '',
    },
    {
      name: '200% RIO AFTER 120 HOURS',
      profit: '200%',
      principleReturn: 'Yes',
      creditAmount: '',
      depositFee: '0.00%',
      debitAmount: '',
    },
  ];

  function handleConfirmPage() {
    // Get the plan, deposit method, and credit amount from the URL parameters
    const urlParams = new URLSearchParams(window.location.search);
    const plan = urlParams.get('plan');
    const depositMethod = urlParams.get('deposit-method');
    const creditAmount = urlParams.get('credit-amount');

    // Retrieve the plan details based on the selected plan
    const planDetail = planDetails.find((plan) => plan.name === urlParams.get('plan'));

    if (planDetail) {
      // Calculate the debit amount
      const debitAmount = parseFloat(creditAmount) + (parseFloat(creditAmount) * (parseFloat(planDetail.depositFee.replace('%', '')) / 100));

      // Display the plan details
      document.querySelector('#plan-name').innerHTML = planDetail.name;
      document.querySelector('#plan-profit').innerHTML = planDetail.profit;
      document.querySelector('#plan-principle-return').innerHTML = planDetail.principleReturn;
      document.querySelector('#plan-credit-amount').innerHTML = `$${creditAmount}`;
      document.querySelector('#plan-deposit-fee').innerHTML = planDetail.depositFee;
      document.querySelector('#plan-debit-amount').innerHTML = `$${debitAmount.toFixed(2)}`;
      document.querySelector('#deposit-method').innerHTML = depositMethod;

      // Add event listeners to the buttons
      document.querySelector('#confirm-button').addEventListener('click', confirmDeposit);
      document.querySelector('#cancel-button').addEventListener('click', cancelDeposit);
    } else {
      console.error(`Plan ${plan} not found`);
    }
  }

  function confirmDeposit(e) {
  e.preventDefault();

  // Get the username from local storage
  const username = localStorage.getItem('username');

  // Get the plan details
  const planName = document.querySelector('#plan-name').innerHTML.replace('%', '').replace(/\s+/g, '_').replace(/_/g, '-'); // Remove spaces and replace with dashes
  const planProfit = document.querySelector('#plan-profit').innerHTML.replace('%', ''); // Remove the percentage sign
  const planPrincipleReturn = document.querySelector('#plan-principle-return').innerHTML;
  const planCreditAmount = document.querySelector('#plan-credit-amount').innerHTML.replace('$', '');
  const planDepositFee = document.querySelector('#plan-deposit-fee').innerHTML.replace('%', ''); // Remove the percentage sign
  const planDebitAmount = document.querySelector('#plan-debit-amount').innerHTML.replace('$', '');
  const depositMethod = document.querySelector('#deposit-method').innerHTML;

  console.log('username:', username);
  console.log('planName:', planName);
  console.log('planProfit:', planProfit);
  console.log('planPrincipleReturn:', planPrincipleReturn);
  console.log('planCreditAmount:', planCreditAmount);
  console.log('planDepositFee:', planDepositFee);
  console.log('planDebitAmount:', planDebitAmount);
  console.log('depositMethod:', depositMethod);

  // Send the deposit details to the server
  fetch('/api/deposit', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json'
    },
    body: JSON.stringify({
      username: username,
      planName: planName,
      planProfit: parseFloat(planProfit) / 100, // Convert to a decimal value
      planPrincipleReturn: planPrincipleReturn,
      planCreditAmount: parseFloat(planCreditAmount),
      planDepositFee: parseFloat(planDepositFee) / 100, // Convert to a decimal value
      planDebitAmount: parseFloat(planDebitAmount),
      depositMethod: depositMethod
    })
  })
  .then(response => response.json())
  .then(data => {
    if (data.success) {
      console.log('Deposit successful!');
      // Redirect to dashboard.html
      window.location.href = 'dashboard.html';
    } else {
      console.log('Error:', data.error);
    }
  })
  .catch(error => {
    console.log('Error:', error);
  });
}
  // Function to cancel deposit
  function cancelDeposit(e) {
    e.preventDefault();
    // Redirect to dashboard.html
    window.location.href = 'dashboard.html';
  }

  // Call the function when the page loads
  document.addEventListener('DOMContentLoaded', handleConfirmPage);



//          const urlParams = new URLSearchParams(window.location.search);
// const plan = urlParams.get('plan');
// const depositMethod = urlParams.get('deposit-method');

// // Display the plan details
// document.querySelector('#plan-name').innerHTML = planDetails[plan].name;
// document.querySelector('#plan-profit').innerHTML = planDetails[plan].profit;
// document.querySelector('#plan-principle-return').innerHTML = planDetails[plan].principleReturn;
// document.querySelector('#plan-credit-amount').innerHTML = planDetails[plan].creditAmount;
// document.querySelector('#plan-deposit-fee').innerHTML = planDetails[plan].depositFee;
// document.querySelector('#plan-debit-amount').innerHTML = planDetails[plan].debitAmount;
// document.querySelector('#deposit-method').innerHTML = depositMethod;

//     // Add event listeners to the buttons
//     document.querySelector('#confirm-button').addEventListener('click', () => {
//       // Handle confirm button click
//     });
//     document.querySelector('#cancel-button').addEventListener('click', () => {
//       // Handle cancel button click
//     });
      </script>
</body>
</html>